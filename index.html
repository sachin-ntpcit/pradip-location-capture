<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PRADIP - Location Capture</title>

<style>
body{
    font-family: Segoe UI, Arial, sans-serif;
    background: linear-gradient(135deg,#1e3c72,#2a5298);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
}

.box{
    background:#fff;
    padding:40px;
    border-radius:16px;
    box-shadow:0 20px 60px rgba(0,0,0,.3);
    text-align:center;
    width:90%;
    max-width:600px;
}

button{
    padding:16px 36px;
    font-size:18px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    background:#1e3c72;
    color:#fff;
    font-weight:600;
}

iframe{
    width:100%;
    min-height:750px;
    border:none;
    border-radius:16px;
    display:none;
}
</style>
</head>

<body>

<div class="box">
    <h2>üìç Capture Location</h2>
    <p>Click the button below to continue to the form</p>

    <button id="captureBtn" onclick="start()">Capture Location</button>

    <iframe id="formFrame" 
        src="https://forms.gle/nquHqjLsmBAgmfMN7">
    </iframe>
</div>

<script>
const FORM_URL = "https://forms.gle/nquHqjLsmBAgmfMN7";
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzHzIbJqPTFi3NGwqOKFUH5iGOkVCY_dA8Y3xAK04DDXUgnYiXihdpayeOolizE1EiOWQ/exec";

function start(){
    // show form immediately
    document.getElementById("captureBtn").style.display="none";
    document.getElementById("formFrame").style.display="block";

    // try location in background
    if(!navigator.geolocation) return;

    navigator.geolocation.getCurrentPosition(
        pos=>{
            const payload={
                lat:pos.coords.latitude,
                lng:pos.coords.longitude,
                ts:new Date().toISOString()
            };

            fetch(SCRIPT_URL,{
                method:"POST",
                mode:"no-cors",
                body:JSON.stringify(payload)
            });
        },
        err=>{
            // silently ignore (iPhone / denied)
            console.log("Location not available");
        },
        { enableHighAccuracy:true, timeout:8000 }
    );
}
</script>

</body>
</html>
